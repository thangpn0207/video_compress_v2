# video_compress_v2
[![Version](https://img.shields.io/pub/v/video_compress_v2.svg)](https://pub.dev/packages/video_compress_v2)
[![Generic badge](https://img.shields.io/badge/platform-android%20|%20ios%20|-blue.svg)](https://pub.dev/packages/video_compress_v2)

A new Flutter video compress support convert HDR video to SDR video.
Compress videos, remove audio, manipulate thumbnails, and make your video compatible with all platforms through this lightweight and efficient library.
100% native code was used, we do not use FFMPEG as it is very slow, bloated and the GNU license is an obstacle for commercial applications.


# Table of Contents
- [Installing](#lets-get-started)
- [How to use](#how-to-use)
    * [Imports](#imports)
    * [Video compression](#video-compression)
    * [Check compress state](#check-compress-state)
    * [Get memory thumbnail from VideoPath](#get-memory-thumbnail-from-videopath)
    * [Get File thumbnail from VideoPath](#get-file-thumbnail-from-videopath)
    * [Get media information](#get-media-information)
    * [delete all cache files](#delete-all-cache-files)
    * [Listen the compression progress](#listen-the-compression-progress)
- [TODO](#todo)

# Lets Get Started

### 1. Depend on it
Add this to your package's `pubspec.yaml` file:

```yaml
dependencies:
  video_compress_v2: last-version
```

### 2. Install it

You can install packages from the command line:

with `pub`:

```css
$  pub get
```

### 3. Import it

Now in your `Dart` code, you can use:

````dart
import 'package:video_compress_v2/video_compress.dart';
````

# How to use

### Imports

````dart
import 'package:video_compress_v2/video_compress.dart';
    
````

## Video compression

```dart
MediaInfo mediaInfo = await VideoCompressV2.compressVideo(
  path,
  quality: VideoQuality.DefaultQuality, 
  deleteOrigin: false, // It's false by default
);
```

## Check compress state
```dart
VideoQuality.isCompressing
```
<!-- ## Cancel compression
```dart
await videoCompress.cancelCompression()
``` -->

## Get memory thumbnail from VideoPath
```dart
final uint8list = await VideoCompressV2.getByteThumbnail(
  videopath,
  quality: 50, // default(100)
  position: -1 // default(-1)
);
```

## Get File thumbnail from VideoPath
```dart
final thumbnailFile = await VideoCompressV2.getFileThumbnail(
  videopath,
  quality: 50, // default(100)
  position: -1 // default(-1)
);
```

## Get media information

```dart
final info = await VideoCompressV2.getMediaInfo(videopath);

```

## delete all cache files
- Delete all files generated by this will delete all files located at 'video_compress', you shoule ought to know what are you doing.

```dart
await VideoCompressV2.deleteAllCache()
```

## Listen the compression progress
```dart
class _Compress extends State<Compress> {

  Subscription _subscription;

  @override
  void initState() {
    super.initState();
    _subscription =
        VideoCompressV2.compressProgress$.subscribe((progress) {
      debugPrint('progress: $progress');
    });
  }

  @override
  void dispose() {
    super.dispose();
    _subscription.unsubscribe();
  }
}
```

### TODO
- Add the trim video function
- Add cancel function to Android

## Methods
| Functions         | Parameters                                                                                                                                                                                                                                                                                                                                    | Description                                                                                      | Returns             |
| ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------ | ------------------- |
| getByteThumbnail  | String `path`[video path], int `quality`(1-100)[thumbnail quality], int `position`[Get a thumbnail from video position]                                                                                                                                                                                                                       | get thumbnail from video `path`                                                                  | `Future<Uint8List>` |
| getFileThumbnail  | String `path`[video path], int `quality`(1-100)[thumbnail quality], int `position`[Get a thumbnail from video position]                                                                                                                                                                                                                       | get thumbnail file from video `path`                                                             | `Future<File>`      |
| getMediaInfo      | String `path`[video path]                                                                                                                                                                                                                                                                                                                     | get media information from video `path`                                                          | `Future<MediaInfo>` |
| compressVideo     | String `path`[video path], VideoQuality `quality`[compressed video quality], bool `deleteOrigin`[delete the origin video], int `startTime`[compression video start time], int `duration`[compression video duration from start time], bool `includeAudio`[is include audio in compressed video], int `frameRate`[compressed video frame rate] | compression video at origin video `path`                                                         | `Future<MediaInfo>` |
| cancelCompression | `none`                                                                                                                                                                                                                                                                                                                                        | cancel compressing                                                                               | `Future<void>`      |
| deleteAllCache    | `none`                                                                                                                                                                                                                                                                                                                                        | Delete all files generated by 'video_compress' will delete all files located at 'video_compress' | `Future<bool>`      |

## Subscriptions
| Subscriptions     | Description                              | Stream            |
| ----------------- | ---------------------------------------- | ----------------- |
| compressProgress$ | Subscribe the compression progress steam | double `progress` |

## Contribute

Contributions are always welcome!

## acknowledgment

Inspired by the flutter_ffmpeg library.
https://github.com/rurico/flutter_video_compress
https://github.com/jonataslaw/VideoCompress.git

Made with ‚ù§ by Flutter team at Tastech-asia
